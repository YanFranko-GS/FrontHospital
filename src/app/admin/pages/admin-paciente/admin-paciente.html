<div class="container mt-4">
    <h2>{{ pacienteEditando ? 'Editar Paciente' : 'Nuevo Paciente' }}</h2>

    <form #form="ngForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="mb-3">
            <label class="form-label">Nombre Completo</label>
            <input type="text" class="form-control" [(ngModel)]="modeloPaciente.nombreCompleto" name="nombreCompleto"
                required>
        </div>

        <div class="mb-3">
            <label class="form-label">Fecha de Nacimiento</label>
            <input type="date" class="form-control" [(ngModel)]="modeloPaciente.fechaNacimiento" name="fechaNacimiento"
                required>
        </div>

        <div class="mb-3">
            <label class="form-label">Correo Electrónico</label>
            <input type="email" class="form-control" [(ngModel)]="modeloPaciente.correoElectronico"
                name="correoElectronico" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Teléfono</label>
            <input type="tel" class="form-control" [(ngModel)]="modeloPaciente.telefono" name="telefono" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Dirección</label>
            <input type="text" class="form-control" [(ngModel)]="modeloPaciente.direccion" name="direccion" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Sexo</label>
            <select class="form-control" [(ngModel)]="modeloPaciente.sexo" name="sexo" required>
                <option value="">Seleccionar</option>
                <option value="Masculino">Masculino</option>
                <option value="Femenino">Femenino</option>
                <option value="No Binario">No Binario</option>
                <option value="Prefiero no decir">Prefiero no decir</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Tipo de Documento</label>
            <select class="form-control" [(ngModel)]="modeloPaciente.tipoDocumento" name="tipoDocumento" required>
                <option value="">Seleccionar</option>
                <option value="DNI">DNI</option>
                <option value="Carné de extranjería">Carné de extranjería</option>
                <option value="Cédula de identidad">Cédula de identidad</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Número de Documento</label>
            <input type="text" class="form-control" [(ngModel)]="modeloPaciente.numeroDocumento" name="numeroDocumento"
                required>
        </div>

        <button type="submit" class="btn btn-success" [disabled]="!form.valid">
            {{ pacienteEditando ? 'Guardar Cambios' : 'Agregar Paciente' }}
        </button>
        <button *ngIf="pacienteEditando" type="button" class="btn btn-secondary ms-2"
            (click)="cancelarEdicion()">Cancelar</button>
    </form>

    <hr class="my-4">

    <h3 style="color: white;">Lista de Pacientes</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Sexo</th>
                <th>Fecha Nacimiento</th>
                <th>Tipo de Documento</th>
                <th>Documento</th>
                <th>Teléfono</th>
                <th>Correo</th>
                <th>Dirección</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let paciente of pacientes">
                <td>{{ paciente.idPaciente }}</td>
                <td>{{ paciente.nombreCompleto }}</td>
                <td>{{ paciente.sexo }}</td>
                <td>{{ paciente.fechaNacimiento | date:'yyyy-MM-dd' }}</td>
                <td>{{ paciente.tipoDocumento }}</td>
                <td>{{ paciente.numeroDocumento }}</td>
                <td>{{ paciente.telefono }}</td>
                <td>{{ paciente.correoElectronico }}</td>
                <td>{{ paciente.direccion }}</td>
                <td>
                    <button class="btn btn-success btn-sm" (click)="cargarPaciente(paciente.idPaciente)">Editar</button>
                    <button class="btn btn-danger btn-sm"
                        (click)="eliminarPaciente(paciente.idPaciente)">Eliminar</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
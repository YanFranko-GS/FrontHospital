<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-blue-200 to-blue-300 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 px-4 py-10">
  <div class="w-full max-w-xl bg-white/90 dark:bg-gray-900/90 rounded-3xl shadow-xl border border-blue-200 dark:border-teal-800 p-8 sm:p-10 animate-fade-in space-y-8">
    
    <!-- Encabezado -->
    <div class="text-center">
      <h1 class="text-3xl sm:text-4xl font-bold text-blue-800 dark:text-teal-200">Crear cuenta</h1>
      <p class="mt-2 text-gray-600 dark:text-gray-300 text-sm sm:text-base">Gestiona tu salud digital desde hoy mismo.</p>
    </div>

    <!-- Formulario -->
    <form *ngIf="registerForm" [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-6">

      <!-- Usuario -->
      <div class="relative">
        <label for="nombreUsuario" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Usuario</label>
        <div class="relative mt-1">
          <input type="text" id="nombreUsuario" formControlName="nombreUsuario" required
            [ngClass]="{
              'border-red-500': registerForm.get('nombreUsuario')?.invalid && registerForm.get('nombreUsuario')?.touched,
              'border-gray-300 dark:border-gray-700': !(registerForm.get('nombreUsuario')?.invalid && registerForm.get('nombreUsuario')?.touched)
            }"
            class="w-full pl-10 pr-4 py-2 rounded-xl border focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white transition" />
          <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" fill="none" stroke="currentColor"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M5.121 17.804A9 9 0 1118.88 6.196M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
        </div>
        <div *ngIf="registerForm.get('nombreUsuario')?.invalid && registerForm.get('nombreUsuario')?.touched"
          class="text-red-500 text-xs mt-1 animate-pulse">
          Campo requerido
        </div>
      </div>

      <!-- Correo -->
      <div class="relative">
        <label for="correoElectronico" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Correo electrónico</label>
        <div class="relative mt-1">
          <input type="email" id="correoElectronico" formControlName="correoElectronico" required
            [ngClass]="{
              'border-red-500': registerForm.get('correoElectronico')?.invalid && registerForm.get('correoElectronico')?.touched,
              'border-gray-300 dark:border-gray-700': !(registerForm.get('correoElectronico')?.invalid && registerForm.get('correoElectronico')?.touched)
            }"
            class="w-full pl-10 pr-4 py-2 rounded-xl border focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white transition" />
          <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" fill="none" stroke="currentColor"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M16 12H8m0 0l4-4m-4 4l4 4" />
          </svg>
        </div>
        <div *ngIf="registerForm.get('correoElectronico')?.invalid && registerForm.get('correoElectronico')?.touched"
          class="text-red-500 text-xs mt-1 animate-pulse">
          Correo inválido
        </div>
      </div>

      <!-- Contraseña -->
      <div>
        <label for="contrasena" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Contraseña</label>
        <div class="relative mt-1">
          <input [type]="showPassword ? 'text' : 'password'" id="contrasena" formControlName="contrasena" required
            [ngClass]="{
              'border-red-500': registerForm.get('contrasena')?.invalid && registerForm.get('contrasena')?.touched,
              'border-gray-300 dark:border-gray-700': !(registerForm.get('contrasena')?.invalid && registerForm.get('contrasena')?.touched)
            }"
            class="w-full px-4 py-2 border rounded-xl pr-12 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white transition" />
          <button type="button" (click)="showPassword = !showPassword"
            class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-600 dark:hover:text-teal-300 transition"
            aria-label="Mostrar/Ocultar">
            <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
              viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0zM2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
            <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
              viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.054 10.054 0 014.163-5.175M15 12a3 3 0 00-3-3M2 2l20 20" />
            </svg>
          </button>
        </div>
        <div *ngIf="registerForm.get('contrasena')?.touched && registerForm.get('contrasena')?.errors" class="text-red-500 text-xs mt-1 animate-pulse">
          <div *ngIf="registerForm.get('contrasena')?.errors?.['required']">Campo requerido</div>
          <div *ngIf="registerForm.get('contrasena')?.errors?.['minlength']">Mínimo 6 caracteres</div>
          <div *ngIf="registerForm.get('contrasena')?.errors?.['pattern']">Debe incluir mayúscula, minúscula y número</div>
        </div>
      </div>

      <!-- Confirmar Contraseña -->
      <div>
        <label for="confirmarContrasena" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Confirmar Contraseña</label>
        <div class="relative mt-1">
          <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmarContrasena"
            formControlName="confirmarContrasena" required
            [ngClass]="{
              'border-red-500': (registerForm.get('confirmarContrasena')?.invalid && registerForm.get('confirmarContrasena')?.touched) || (registerForm.errors?.['mismatch'] && registerForm.get('confirmarContrasena')?.touched),
              'border-gray-300 dark:border-gray-700': !((registerForm.get('confirmarContrasena')?.invalid && registerForm.get('confirmarContrasena')?.touched) || (registerForm.errors?.['mismatch'] && registerForm.get('confirmarContrasena')?.touched))
            }"
            class="w-full px-4 py-2 border rounded-xl pr-12 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white transition" />
          <button type="button" (click)="showConfirmPassword = !showConfirmPassword"
            class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-600 dark:hover:text-teal-300 transition">
            <!-- Mismo icono que arriba -->
            <svg *ngIf="!showConfirmPassword" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0zM2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
            <svg *ngIf="showConfirmPassword" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.054 10.054 0 014.163-5.175M15 12a3 3 0 00-3-3M2 2l20 20" />
            </svg>
          </button>
        </div>
        <div *ngIf="registerForm.get('confirmarContrasena')?.touched && registerForm.get('confirmarContrasena')?.errors"
          class="text-red-500 text-xs mt-1 animate-pulse">
          <div *ngIf="registerForm.get('confirmarContrasena')?.errors?.['required']">Campo requerido</div>
        </div>
        <div *ngIf="registerForm?.errors?.['mismatch'] && registerForm.get('confirmarContrasena')?.touched"
          class="text-red-500 text-xs mt-1 animate-pulse">
          Las contraseñas no coinciden
        </div>
      </div>

      <!-- Botón -->
      <button type="submit" [disabled]="!registerForm.valid"
        class="w-full py-3 bg-blue-700 hover:bg-blue-800 dark:bg-teal-600 dark:hover:bg-teal-700 text-white font-semibold rounded-xl shadow-md transition disabled:bg-gray-300 disabled:cursor-not-allowed">
        Registrarse
      </button>
    </form>

    <!-- Éxito -->
    <div *ngIf="registroExitoso"
      class="mt-6 text-green-700 bg-green-100 border border-green-300 rounded-xl px-4 py-3 text-center animate-fade-in">
      ¡Se registró exitosamente! Redirigiendo...
    </div>
  </div>
</div>
